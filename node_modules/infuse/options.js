var FS      = require('fs'),
    Path    = require('path'),
    pkgPath = Path.join(__dirname, '..', '..', 'package.json'),
    pkgInfo = JSON.parse(FS.readFileSync(pkgPath, 'utf8')),
    program
;

module.exports = require('commander').
    version(pkgInfo.version).
    usage('[options] INPUT_PATH [OUTPUT_PATH]').
    option(
        '-N, --no-minify',
        'Do not minify the output.'
    ).
    option(
        '-m, --minifier [NAME]',
        'Minifier to use. Defaults to UglifyJS.',
        'uglify-js'
    ).
    option(
        '-D, --define <SYMBOL[=VALUE]>',
        'Replace all instances of the specified SYMBOL with VALUE. Can be specified multiple times.'
    ).
    option(
        '-d, --module <NAME>',
        'Define all exported properties from NAME module. Can be specified multiple times.'
    ).
    option(
        '-E, --embed',
        'Embed all infused modules as strings in the final output.'
    ).
    option(
        '-i, --infuse PATH',
        'Infuse the file PATH. Will automatically be \'de-fused\' before the INPUT_PATH executes. Can be specified multiple times.'
    ).
    option(
        '-A, --dump-ast',
        'Print the generated AST to STDOUT and exit.'
    ).
    parse(process.argv);
    
    
// console.log(module.exports);