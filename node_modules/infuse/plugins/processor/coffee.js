
var plugins     = require('../../plugins'),
    processor   = require('./'),
    coffee      = require('coffee-script');

module.exports = Object.create(processor, {
    
    extension: { value: '.coffee', enumerable: true },

    run: {
        value: function (src, opts, callback) {
            try {
                src = coffee.compile(src);
            }
            catch (e) {
                callback(e);
            }
        
            callback(null, src);
        },
        enumerable: true
    }
});

plugins.register('coffee', module.exports);
