
var plugins     = require('infuse/plugins'),
    processor   = require('./'),
    coffee;

module.exports = Object.create(processor, {
    
    extension: { value: '.coffee', enumerable: true },

    run: {
        value: function (src) {
            return coffee.compile(src);
        },
        enumerable: true
    }
});

try {
    coffee = require('coffee-script');
    plugins.register('coffee', module.exports);
}
catch (e) {
    // don't register if coffee-script isn't installed
}
